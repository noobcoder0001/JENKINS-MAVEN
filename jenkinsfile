node('builtinnode') {
    properties([parameters([choice(choices: ['master', 'scripted', 'declarative'], description: 'Branch to build', name: 'Branch_to_build'), string(defaultValue: 'package', description: 'maven goal', name: 'mvn_goal')])])
    try {
        stage('GIT') {
        git url: "https://github.com/GitPracticeRepo/java11-examples",
        branch: "${params.Branch_to_build}"
        }
    stage('BUILD') {
        sh "mvn ${params.mvn_goal}"
        }
    stage('PUBLISH REPORTS') {
        junit '**/TEST-*.xml'
        }
    stage('ARCHIEVE ARTIFACTS') {
        archiveArtifacts artifacts: 'target/*.jar', followSymlinks: false        
        }
    currentBuild.result='SUCCESS'
    
    }
    catch (err) {
        currentBuild.result='FAIL'
    }
    finally {
        mail to: 'rakeshn6711@gmail.com',
        subject: 'Build status',
        body: 'Your build status is ${currentBuild.result}'

    }
}
